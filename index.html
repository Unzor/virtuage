<!DOCTYPE HTML>
<html>
<head>
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <img id="frame">
    <script>
	var ignore = ["Backspace", "Enter"]
	function arrayFindIncludes(key, arr) {
    var result;
    var none = null;
    arr.forEach(function(k) {
        if (k == key) {
            result = k;
            none = k;
        } else {
            result = none;
        }
    })
    return result;
}

        var socket = io();
        socket.emit("run");
        socket.on("frame", (url) => {
            document.getElementById("frame").src = url;
        })

        window.onkeydown = function(e) {
		if (!arrayFindIncludes(e.key, ignore)) {
		                socket.emit('keydown', e.key);
		} else {
		if (e.key == "Enter") {
		                socket.emit('keydown', "\r");
						} else if (e.key == "Backspace") {
								                socket.emit('keydown', "\b");
						}
}
        }
    </script>
</body>
</html>
